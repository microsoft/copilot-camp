
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">
      
      
        <link rel="prev" href="../05-connectors/">
      
      
        <link rel="next" href="../07-autonomous/">
      
      
        
          <link rel="alternate" href="../../../../../pages/make/copilot-studio/06-mcp/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="ja">
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>ラボ MCS6 - MCP サーバーの利用 - Copilot Developer Camp</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/labStyles.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mcs6-mcp" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../../../../" title="Copilot Developer Camp" class="md-header__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Copilot Developer Camp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ラボ MCS6 - MCP サーバーの利用
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="言語切り替え">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../../pages/make/copilot-studio/06-mcp/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ja" class="md-select__link">
              Japanese (日本語)
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../" class="md-tabs__link">
        
  
  
    
  
  ようこそ

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Maker 向けエージェントの作成

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../extend-m365-copilot/" class="md-tabs__link">
          
  
  
  宣言型エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../custom-engine/" class="md-tabs__link">
          
  
  
  カスタム エンジン エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../beyond-agents/" class="md-tabs__link">
          
  
  
  AI の概念と手法

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../resources/" class="md-tabs__link">
        
  
  
    
  
  動画など

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../" title="Copilot Developer Camp" class="md-nav__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    Copilot Developer Camp
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ようこそ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Maker 向けエージェントの作成
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Maker 向けエージェントの作成
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microsoft 365 Copilot 向けエージェントの作成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MAB - Copilot Studio Lite によるエージェント作成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MAB1 - 最初のエージェントの構築
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS - Microsoft Copilot Studio の理解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS0 - セットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab MCS1 - 最初のエージェント
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-topics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS2 - トピックの定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS3 - ツールの定義
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-extending-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS4 - Microsoft 365 Copilot の拡張
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS5 - Power Platform カスタム コネクター
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS6 - MCP サーバーの利用
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS6 - MCP サーバーの利用
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exercise-1-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1 : MCP サーバーのセットアップ
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2 : Copilot Studio で新しいエージェントを作成
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-3-mcp-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3 : MCP サーバーと Copilot Studio の統合
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-autonomous/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS7 - Autonomous エージェントの作成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS8 - RAG のための Azure AI Search 統合
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-connected-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MCS9 - Connected エージェント (プレビュー)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab MSA - SharePoint エージェントの理解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MSA1 - 最初の SharePoint エージェントを構築する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/02-sharing-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab MSA2 - SharePoint エージェントの共有
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    宣言型エージェントの構築
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    宣言型エージェントの構築
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microsoft 365 Copilot の拡張
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    セットアップ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    セットアップ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E0 - セットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    宣言型エージェントの基礎
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    宣言型エージェントの基礎
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01-typespec-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E1 - Microsoft 365 Agents Toolkit で TypeSpec 定義を使って Declarative エージェントを初めて作成する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01a-geolocator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E1 - Geo Locator ゲーム エージェントのインストラクション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API をゼロから構築して統合
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API をゼロから構築して統合
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/02-build-the-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E2 - API の構築
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/03-add-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E3 - 宣言型エージェントと API プラグインの追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/04-enhance-api-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E4 - API とプラグインの強化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/05-add-adaptive-card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E5 - Adaptive Card の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06a-add-authentication-ttk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E6a - OAuth で Entra ID 認証を追加 (Agents Toolkit)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    インテグレーション
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    インテグレーション
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/07-add-graphconnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ E7 - 統合: Microsoft Copilot Connector を使用して Trey Genie に Knowledge 機能を追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/08-mcp-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ 08 : Declarative エージェントを MCP サーバーに接続する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/09-connected-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ 09: Connected Agent - Zava のマルチ エージェント請求オーケストレーション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    カスタム エンジン エージェントの構築
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    カスタム エンジン エージェントの構築
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    カスタム エンジン エージェントの構築
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Microsoft Foundry で構築する
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Microsoft Foundry で構築する
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに - M365 Agents SDK と Semantic Kernel で独自エージェントを構築する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BMA0 - 前提条件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/01-agent-in-foundry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BMA1 - Microsoft Foundry でエージェントを準備する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/02-agent-with-agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BMA2 - M365 Agents SDK を使用した初めてのエージェント構築
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/03-agent-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BMA3 - Microsoft Foundry エージェントと M365 Agents SDK の統合
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/04-bring-agent-to-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ MBA4 - エージェントを Copilot Chat に追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Agent Framework で構築する
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agent Framework で構築する
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zava Insurance エージェントの構築 - Microsoft 365 Agents SDK と Agents Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/01-build-and-run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF1 - 最初のエージェントの構築と実行
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/02-add-claim-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF2 - Azure AI Search を使用したドキュメント検索の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/03-add-vision-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF3 - Mistral AI を使用したビジョン解析の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/04-add-policy-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF4 - ポリシー検索の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/05-add-communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF5 - 通信機能の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/06-add-copilot-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF6 - Microsoft 365 Work IQ API 統合を追加する
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agent-framework/07-add-mcp-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ラボ BAF7 - MCP ツール統合の追加
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI の概念と手法
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI の概念と手法
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../beyond-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../beyond-agents/beginner-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェント指示ラボ - エージェント指示の改善 (初心者向け)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    動画など
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mcs6-mcp">ラボ MCS6 - MCP サーバーの利用</h1>
<p>このラボでは、Microsoft Copilot Studio で作成したエージェントを MCP (Model Context Protocol) サーバーで拡張する方法を学びます。具体的には、架空の求人候補者リストを管理するツールを提供する既存の MCP サーバーを利用します。MCP サーバーは次の機能を提供します。</p>
<ul>
<li>候補者の一覧取得  </li>
<li>条件で候補者を検索  </li>
<li>新しい候補者の追加  </li>
<li>既存候補者情報の更新  </li>
<li>候補者の削除  </li>
</ul>
<div class="lab-intro-video">
    <div style="flex: 1; min-width: 0;">
        <iframe  src="//www.youtube.com/embed/Y8KpHmmMqzc" frameborder="0" allowfullscreen style="width: 100%; aspect-ratio: 16/9;">          
        </iframe>
          <div>この動画でラボの概要を短時間で確認しましょう。</div>
    </div>
    <div style="flex: 1; min-width: 0;">
   <div class="floatwide">
   <div class="cc-lab-toc mcs-path">
     <img src="/copilot-camp/assets/images/path-icons/MCS-path-heading.png"></img>
     <div>
       <p>Microsoft Copilot Studio で エージェント を構築したい場合は、次の ラボ を実施してください</p>
       <ul>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/00-prerequisites/">MCS0 - セットアップ</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/01-first-agent/">MCS1 - 最初の エージェント</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/02-topics/">MCS2 - トピックの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/03-actions/">MCS3 - ツールの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/04-extending-m365-copilot/">MCS4 - Microsoft 365 Copilot の拡張</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/05-connectors/">MCS5 - カスタム コネクタの使用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">MCS6 - MCP サーバーの使用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/07-autonomous/">MCS7 - 自律型 エージェント の作成</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/08-rag/">MCS8 - RAG のための Azure AI Search の統合</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/09-connected-agents/">MCS9 - 接続された エージェント (プレビュー)</a></li>
       </ul>
     </div>
   </div>

   <script>
   (() => {

   // This script decorates the table of contents with a "you are here" indicator.
   const toc = document.getElementsByClassName('cc-lab-toc');
   for (const div of toc) {
       const lis = div.querySelectorAll('li');
       for (const li of lis) {
           const anchor = li.querySelector('a');
           if (location.href.includes(anchor.href)) {
               const span = document.createElement("span");
               span.innerHTML = "YOU&nbsp;ARE&nbsp;HERE";
               li.appendChild(span);
           }
       }    
   }
   })();
   </script>

   <!-- 
     <div class="cc-mcs-lab-steps">
       <h4>Table of Contents</h4>
       <cc-table-of-contents />
     </div> -->
   </div>
    </div>
</div>

<div class="admonition tip">
<p class="admonition-title">MCP について学ぶ</p>
<p>このラボでは MCP の概念を紹介し、Copilot Studio と統合する方法を示します。MCP は AI アシスタントが外部データ ソースやツールに安全に接続できる新しいプロトコルです。詳細は <a href="https://github.com/microsoft/mcp-for-beginners" target="_blank">Model Context Protocol (MCP) for beginners</a> のトレーニング教材をご覧ください。</p>
</div>
<p>このラボで学ぶ内容:</p>
<ul>
<li>既存の MCP サーバーを構成して接続する方法  </li>
<li>外部サーバーの MCP ツールとリソースを利用する方法  </li>
<li>Copilot Studio エージェントと MCP サーバーを統合する方法  </li>
</ul>
<h2 id="exercise-1-mcp">Exercise 1 : MCP サーバーのセットアップ</h2>
<p>この演習では、求人候補者管理機能を提供する事前構築済み MCP サーバーをセットアップします。サーバーは Microsoft .NET ベースで、C# 用の MCP SDK を使用しています。ここではサーバーをローカルで実行できるようにダウンロードして構成します。</p>
<h3 id="step-1-mcp">Step 1: MCP サーバーと前提条件の理解</h3>
<p>このラボで利用する HR MCP サーバーは、次のツールを提供します。</p>
<ul>
<li><strong>list_candidates</strong>: 候補者の全リストを取得  </li>
<li><strong>search_candidates</strong>: 名前、メール、スキル、現在の役職で候補者を検索  </li>
<li><strong>add_candidate</strong>: 新しい候補者を追加  </li>
<li><strong>update_candidate</strong>: メールで既存候補者を更新  </li>
<li><strong>remove_candidate</strong>: メールで候補者を削除  </li>
</ul>
<p>サーバーは次の候補者情報を管理します。</p>
<ul>
<li>個人情報 (firstname、lastname、full name、email)  </li>
<li>職務関連情報 (spoken languages、skills、current role)  </li>
</ul>
<p>開始前に以下を準備してください。</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download/dotnet/8.0" target="_blank">.NET 8.0 SDK</a>  </li>
<li><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a>  </li>
<li><a href="https://nodejs.org/en" target="_blank">Node.js v.22 以上</a>  </li>
<li><a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a>  </li>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/dev-tunnels/get-started" target="_blank">Dev tunnel</a>  </li>
</ul>
<p><cc-end-step lab="mcs6" exercise="1" step="1" /></p>
<h3 id="step-2-mcp">Step 2: MCP サーバーのダウンロードと実行</h3>
<p>このラボでは、事前構築済みの HR MCP サーバーを使用します。<a href="https://download-directory.github.io/?url=https://github.com/microsoft/copilot-camp/tree/main/src/make/copilot-studio/path-m-lab-mcs6-mcp/hr-mcp-server&amp;filename=hr-mcp-server" target="_blank">こちら</a> からサーバーファイルをダウンロードしてください。</p>
<p>ZIP を展開し、Visual Studio Code でフォルダーを開きます。サーバーは実装済みで、すぐに実行できます。</p>
<p><img alt="Visual Studio Code で HR MCP サーバー プロジェクトのアウトラインを表示している。サーバーファイルと候補者データが見える。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-01.png" /></p>
<p>プロジェクトの主な要素は次のとおりです。</p>
<ul>
<li><code>Configuration</code>: MCP サーバーの構成を定義する <code>HRMCPServerConfiguration.cs</code>  </li>
<li><code>Data</code>: 候補者リストを提供する <code>candidates.json</code>  </li>
<li><code>Services</code>: 候補者リストを読み込み管理する <code>ICandidateService.cs</code> と <code>CandidateService.cs</code>  </li>
<li><code>Tools</code>: MCP ツールを定義する <code>HRTools.cs</code> とツールで使用するデータモデルを定義する <code>Models.cs</code>  </li>
<li><code>DevTunnel_Instructions.MD</code>: MCP サーバーを dev tunnel で公開する手順  </li>
<li><code>Progam.cs</code>: MCP サーバーを初期化するメイン エントリポイント  </li>
</ul>
<p>Visual Studio Code から新しいターミナルを開くか、通常のターミナルで MCP サーバープロジェクトのルートフォルダーへ移動し、次のコマンドで依存関係のインストール、ビルド、および実行を行います。</p>
<pre><code class="language-console">dotnet run
</code></pre>
<p>MCP サーバーが起動していることを確認します。ブラウザーで <a href="http://localhost:47002/" target="_blank">http://localhost:47002/</a> にアクセスすると、JSON 形式のエラーメッセージが表示されます。これは MCP サーバーに到達できていることを意味します。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>このラボ付属の HR MCP サーバーは本番環境向けではありません。メモリ内リストで動作し、複数の会話セッション間でデータを保持しません。HTTP で公開する MCP サーバー構築の基礎を理解する出発点として提供しています。たとえば、<a href="https://github.com/fabianwilliams/hr-mcp-server" target="_blank">こちら</a> には <a href="https://github.com/fabianwilliams/" target="_blank">Fabian Williams (Microsoft)</a> が実装した、コンテナーアプリと永続ストレージを備えたより高度なサーバーがあります。</p>
</div>
<p><cc-end-step lab="mcs6" exercise="1" step="2" /></p>
<h3 id="step-3-dev-tunnel">Step 3: Dev tunnel の構成</h3>
<p>次に、MCP サーバーを公開 URL でアクセスできるようにします。ローカル環境でサーバーを実行しているため、<code>localhost</code> を公開 URL へ変換するリバース プロキシ ツールが必要です。ここでは Microsoft 提供の dev tunnel を使用します。</p>
<ol>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/dev-tunnels/get-started" target="_blank">手順</a> に従って dev tunnel をインストール  </li>
<li>次のコマンドで dev tunnel にサインイン  </li>
</ol>
<pre><code class="language-console">devtunnel user login
</code></pre>
<ol>
<li>次のコマンドで dev tunnel をホスト  </li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>下記の <code>hr-mcp</code> 名は一意にする必要があります。例えば Rose さんなら <code>hr-mcp-rose</code> のように変更してください。<code>Request not permitted. Unauthorized tunnel creation access ...</code> といったエラーが出た場合は既に使用されている名前ですので、別名を指定してください。</p>
</div>
<pre><code class="language-console">devtunnel create hr-mcp -a --host-header unchanged
devtunnel port create hr-mcp -p 47002
devtunnel host hr-mcp
</code></pre>
<p>実行後、接続情報が表示されます。</p>
<p><img alt="コンソールで dev tunnel を実行している。ホストポート、ブラウザーでの接続 URL、ネットワークアクティビティ確認用 URL が表示される。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-02.png" /></p>
<p>「Connect via browser」の URL をコピーして保存します。ブラウザーでその URL にアクセスすると、次のような確認ページが表示される場合があります。</p>
<p><img alt="dev tunnel で MCP サーバーにアクセスする確認ページ。「Continue」ボタンを選択する。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-03.png" /></p>
<p>ラボ中は dev tunnel コマンドと MCP サーバーの両方を起動したままにしてください。再起動が必要な場合は <code>devtunnel host hr-mcp</code> を再実行します。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="3" /></p>
<h3 id="step-4-mcp">Step 4: MCP サーバーのテスト</h3>
<p>ローカル環境で MCP サーバーをテストします。シンプルに <a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a> を利用しましょう。ターミナルで次のコマンドを実行します。</p>
<pre><code class="language-console">npx @modelcontextprotocol/inspector
</code></pre>
<p>Node.js が MCP Inspector をダウンロード・実行し、ターミナルには次のような出力が表示されます。</p>
<p><img alt="ターミナルで MCP Inspector を起動した際の出力。プロキシ ポートと MCP Inspector の URL が示される。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-01.png" /></p>
<p>ブラウザーが自動起動し、以下の画面が表示されます。</p>
<p><img alt="MCP Inspector の Web インターフェース。左側に MCP サーバー設定と &quot;Connect&quot; ボタンがある。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-02.png" /></p>
<p>次のように設定します。</p>
<ul>
<li>1️⃣ <strong>Transport type</strong>: Streamable HTTP  </li>
<li>2️⃣ <strong>URL</strong>: dev tunnel の「Connect via browser」URL  </li>
</ul>
<p>3️⃣ <strong>Connect</strong> を選択して MCP サーバーへ接続します。緑色の丸と <strong>Connected</strong> メッセージが表示されれば成功です。<br />
続いて画面の Tools セクションで 1️⃣ <strong>List Tools</strong> を選択し、サーバーが公開するツール一覧を取得します。<br />
2️⃣ <strong>list_candidates</strong> ツールを選択し、3️⃣ <strong>Run tool</strong> を押してツールを呼び出します。</p>
<p><img alt="MCP Inspector でツール一覧を取得し &quot;list_candidates&quot; ツールを実行する様子。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-03.png" /></p>
<p>成功すると緑色で <strong>Success</strong> と表示され、ツールの出力が確認できます。<br />
<strong>History</strong> セクションでは送信履歴を確認できます。</p>
<p><img alt="MCP Inspector でツール呼び出し成功後の画面。緑色の成功メッセージと出力が表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-04.png" /></p>
<p>これで Microsoft Copilot Studio のエージェントから MCP サーバーを利用する準備が整いました。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="4" /></p>
<h2 id="exercise-2-copilot-studio">Exercise 2 : Copilot Studio で新しいエージェントを作成</h2>
<p>この演習では、Exercise 1 で構成した MCP サーバーを利用する Copilot Studio エージェントを作成します。</p>
<h3 id="step-1">Step 1: 新しいエージェントの作成</h3>
<p>ブラウザーで <a href="https://copilotstudio.microsoft.com" target="_blank">https://copilotstudio.microsoft.com</a> にアクセスし、対象 Microsoft 365 テナントの作業アカウントでサインインします。</p>
<p><strong>Lab MCS0 - Setup</strong> (00-prerequisites.md) の <strong>Exercise 1</strong> で作成した <code>Copilot Dev Camp</code> 環境を選択し、画面中央の <strong>Create an agent</strong> を選択してエージェントを作成します。</p>
<p>次の設定でエージェントを構成します。</p>
<ul>
<li><strong>Name</strong>:</li>
</ul>
<pre><code class="language-text">HR Candidate Management
</code></pre>
<ul>
<li><strong>Description</strong>:</li>
</ul>
<pre><code class="language-text">An AI assistant that helps manage HR candidates using MCP server integration 
for comprehensive candidate management
</code></pre>
<ul>
<li><strong>Instructions</strong>:</li>
</ul>
<pre><code class="language-text">You are a helpful HR assistant that specializes in candidate management. You can help users search 
for candidates, check their availability, get detailed candidate information, and add new 
candidates to the system. 
Always provide clear and helpful information about candidates, including their skills, experience, 
contact details, and availability status.
</code></pre>
<ul>
<li><strong>Agent's Model</strong>: GTP-5 Chat を選択</li>
</ul>
<p><img alt="Copilot Studio のエージェント「Overview」ページ。名前、説明、モデル、指示が入力された &quot;HR Candidate Management&quot; エージェントが表示。" src="../../../../../assets/images/make/copilot-studio-06/create-agent-01.png" /></p>
<p><strong>Publish</strong> を選択してエージェントを公開します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="1" /></p>
<h3 id="step-2">Step 2: エージェントの会話スターター設定</h3>
<p><strong>Overview</strong> ページで <strong>Suggested prompts</strong> セクションを次のように追加します。</p>
<ol>
<li>Title: <code>List all candidates</code> - Prompt: <code>List all the candidates</code>  </li>
<li>Title: <code>Search candidates</code> - Prompt: <code>Search for candidates with name [NAME_TO_SEARCH]</code>  </li>
<li>Title: <code>Add new candidate</code> - Prompt: <code>Add a candidate with firstname [FIRSTNAME], lastname [LASTNAME],  e-mail [EMAIL], role [ROLE], spoken languages [LANGUAGES], and skills [SKILLS]</code>  </li>
</ol>
<p><img alt="エージェント設定ページで &quot;Suggested prompts&quot; セクションが入力されている。" src="../../../../../assets/images/make/copilot-studio-06/configure-agent-01.png" /></p>
<p><strong>Save</strong> を選択して変更を保存します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="2" /></p>
<h2 id="exercise-3-mcp-copilot-studio">Exercise 3 : MCP サーバーと Copilot Studio の統合</h2>
<p>この演習では、MCP サーバーと Copilot Studio エージェントの統合を構成します。</p>
<h3 id="step-1-mcp_1">Step 1: MCP サーバーが公開するツールの追加</h3>
<p>エージェントで 1️⃣ <strong>Tools</strong> セクションへ移動し、2️⃣ <strong>+ Add a tool</strong> を選択します。</p>
<p><img alt="エージェントの &quot;Tools&quot; セクションで &quot;+ Add a tool&quot; コマンドが強調表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-01.png" /></p>
<p>1️⃣ <strong>Model Context Protocol</strong> グループを選択して、既に利用可能な MCP サーバーを確認します。次に 2️⃣ <strong>+ New tool</strong> を選択して HR MCP サーバーを追加します。</p>
<p><img alt="新しいツールを追加するパネルで &quot;+ New tool&quot; コマンドが強調表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-02.png" /></p>
<p>ツールの種類を選択するダイアログで <strong>Model Context Protocol</strong> を選択します。</p>
<p><img alt="新しいツール追加ダイアログで &quot;Model Context Protocol&quot; オプションが強調表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-03.png" /></p>
<p>新しい MCP サーバーの名前、説明、URL、認証方法を入力するダイアログが開きます。</p>
<ul>
<li>Name: <code>HR MCP Server</code>  </li>
<li>Description: <code>Allows managing a list of candidates for the HR department</code>  </li>
<li>URL: dev tunnel の <code>[Connect via browser of your dev tunnel]</code>  </li>
<li>Authentication: <strong>None</strong>  </li>
</ul>
<p>入力後 <strong>Create</strong> を選択します。</p>
<p><img alt="MCP サーバー追加ダイアログ。サーバー名、説明、URL、認証方法を設定し &quot;Create&quot; を押す。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-04.png" /></p>
<p>ツールが作成されると、MCP サーバーへの接続を求めるダイアログが表示されます。</p>
<p><img alt="MCP サーバー接続ダイアログ。&quot;Connection&quot; ステータスが &quot;Not connected&quot;。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-05.png" /></p>
<p><code>Not connected</code> を選択し <strong>Create a new connection</strong> をクリックして接続設定を行います。</p>
<p><img alt="MCP サーバーへの &quot;Create a new connection&quot; オプション。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-06.png" /></p>
<p>接続が完了したら <strong>Add and configure</strong> を選択し、MCP サーバーとツールが正しく登録されたことを確認します。</p>
<p><img alt="Copilot Studio で &quot;HR MCP Server&quot; コネクタをエージェントに追加するダイアログ。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-09.png" /></p>
<p>MCP サーバーが公開するすべてのツールがエージェントで利用可能になっていることを確認できます。</p>
<p><img alt="登録した MCP サーバーの設定とツール一覧が表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-10.png" /></p>
<p><cc-end-step lab="mcs6" exercise="3" step="1" /></p>
<h3 id="step-2-mcp_1">Step 2: MCP サーバー統合のテスト</h3>
<p>右上の <strong>Publish</strong> をクリックしてエージェントを公開します。公開後、組み込みの Test パネルで次のプロンプトを試します。</p>
<pre><code class="language-text">List all candidates
</code></pre>
<p>エージェントは MCP サーバーの <code>list_candidates</code> ツールを使用し、HR システムに登録された全候補者を返すはずです。<br />
ただし、候補者リストを取得するにはコネクタへ接続する必要があります。Copilot Studio が <strong>Open connection manager</strong> を求めてきたら MCP サーバーに接続し、<strong>Retry</strong> してください。</p>
<p><img alt="エージェントとの初回ダイアログ。接続マネージャーを開き MCP サーバーへ接続した後で再試行するよう促される。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-01.png" /></p>
<p>接続後、HR MCP サーバーから候補者リストが取得できます。</p>
<p><img alt="HR MCP Server から取得した候補者リスト。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-02.png" /></p>
<div class="admonition tip">
<p class="admonition-title">ローカルで MCP サーバーをデバッグ</p>
<p>開発者の方は <code>HRTools.cs</code> にブレークポイントを設定し、Visual Studio Code でデバッガーをアタッチすることで、MCP サーバーの動作を詳細に追跡できます。</p>
</div>
<p>エージェントを Microsoft 365 Copilot Chat でも利用可能にしましょう。1️⃣ <strong>Channels</strong> セクションを開き、2️⃣ <strong>Teams and Microsoft 365 Copilot</strong> チャンネルを選択、3️⃣ <strong>Make agent available in Microsoft 365 Copilot</strong> をチェックし、4️⃣ <strong>Add channel</strong> をクリックします。チャンネルが有効になるまで待ってパネルを閉じ、再度 <strong>Publish</strong> でエージェントを公開します。</p>
<p><img alt="&quot;Teams and Microsoft 365 Copilot&quot; チャンネルでの公開インターフェース。&quot;Make agent available in Microsoft 365 Copilot&quot; のチェックボックスと &quot;Add channel&quot;。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-01.png" /></p>
<p>再び <strong>Teams and Microsoft 365 Copilot</strong> チャンネルを開き、<strong>See agent in Microsoft 365</strong> を選択してエージェントを Microsoft 365 Copilot に追加します。</p>
<p><img alt="&quot;See agent in Microsoft 365&quot; コマンドが強調表示。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-02.png" /></p>
<p>表示されるウィンドウで <strong>Add</strong> → <strong>Open</strong> を選択し、Microsoft 365 Copilot 上でエージェントを試します。</p>
<div class="admonition info">
<p class="admonition-title">エージェントの詳細</p>
<p><strong>Teams and Microsoft 365 Copilot</strong> チャンネルの設定パネルから、説明やカスタム アイコンなど追加情報を設定できます。</p>
</div>
<p><img alt="Microsoft 365 Copilot へのエージェント追加インターフェース。&quot;Add&quot; ボタンがある。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-03.png" /></p>
<p>Microsoft 365 Copilot でエージェントを試してみましょう。UI には先ほど設定した Suggested prompts が表示されます。たとえば次のプロンプトを入力します。</p>
<pre><code class="language-text">Search for candidate Alice
</code></pre>
<p><img alt="Microsoft 365 Copilot チャット画面。「HR Candidate Management」の提案プロンプトと &quot;Search for candidate Alice&quot; の入力例。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-01.png" /></p>
<p>エージェントは MCP サーバーの <code>search_candidates</code> ツールを使用し、検索条件に一致する候補者を 1 名返すはずです。ただし Microsoft 365 Copilot でもコネクタへの再接続が必要なため、Copilot Studio の接続マネージャーで MCP サーバーに接続してください。</p>
<p><img alt="Microsoft 365 Copilot チャットが MCP サーバー接続のため &quot;Open the connection manager&quot; を指示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-02.png" /></p>
<p>接続後、再度プロンプトを実行すると期待どおりの結果が得られます。</p>
<p><img alt="検索条件に一致した候補者 Alice Johnson の情報が表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-03.png" /></p>
<p>次に、より高度な <code>add_candidate</code> ツールを試して新しい候補者を追加します。以下のプロンプトを使用します。</p>
<pre><code class="language-text">Add a new candidate: John Smith, Software Engineer, skills: React, Node.js, 
email: john.smith@email.com, speaks English and Spanish
</code></pre>
<p>エージェントは意図を理解し、<code>add_candidate</code> ツールに必要な引数を抽出してツールを実行し、新しい候補者を追加します。MCP サーバーからは追加完了の確認が返ります。</p>
<p><img alt="MCP サーバー経由で新しい候補者が追加されたことをエージェントが確認。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-04.png" /></p>
<p>再度候補者リストを取得すると、<code>John Smith</code> が追加されていることを確認できます。</p>
<p><img alt="更新後の候補者リスト。最後に John Smith が追加されている。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-05.png" /></p>
<p>他にも次のようなプロンプトで遊んでみましょう。</p>
<pre><code class="language-text">Update the candidate with email bob.brown@example.com to speak also French
</code></pre>
<p>または</p>
<pre><code class="language-text">Add skill &quot;Project Management&quot; to candidate bob.brown@example.com
</code></pre>
<p>あるいは</p>
<pre><code class="language-text">Remove candidate bob.brown@example.com
</code></pre>
<p>エージェントは適切なツールを自動で呼び出し、プロンプトに応じて動作します。</p>
<p>これで完了です！エージェントは完全に機能し、HR MCP サーバーが提供するすべてのツールを利用できるようになりました。</p>
<p><cc-end-step lab="mcs6" exercise="3" step="2" /></p>
<p><span style="font-size: large; font-weight: bold; color: #1c8fd2;">おめでとうございます！</span></p>
<p>ラボ MCS6 - MCP サーバーの利用 を完了しました！</p>
<p><a href="../07-autonomous">こちら</a> から Lab MCS7 に進み、Copilot Studio で自律型エージェントの作成方法を学びましょう。
<cc-next /></p>
<p><img src="https://m365-visitor-stats.azurewebsites.net/copilot-camp/make/copilot-studio/06-mcp--ja" /></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.integrate", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../../../javascripts/cc-award.js"></script>
      
        <script src="../../../../../javascripts/cc-next.js"></script>
      
        <script src="../../../../../javascripts/cc-lab-step.js"></script>
      
        <script src="../../../../../javascripts/cc-card.js"></script>
      
    
  </body>
</html>