
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">
      
      
        <link rel="prev" href="../05-connectors/">
      
      
        <link rel="next" href="../../sharepoint-agents/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>ラボ MCS6 - MCP サーバーの利用 - Copilot Developer Camp</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/labStyles.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mcs6-mcp" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../../../../" title="Copilot Developer Camp" class="md-header__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Copilot Developer Camp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ラボ MCS6 - MCP サーバーの利用
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="言語切り替え">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../../pages/make/copilot-studio/06-mcp/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ja" class="md-select__link">
              Japanese (日本語)
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../" class="md-tabs__link">
        
  
  
    
  
  ようこそ

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Maker 向けエージェントの作成

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../extend-m365-copilot/" class="md-tabs__link">
          
  
  
  宣言型エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../custom-engine/" class="md-tabs__link">
          
  
  
  カスタム エンジン エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../copilot-instructions/beginner-agent/" class="md-tabs__link">
          
  
  
  プロンプト エンジニアリング

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../awards/" class="md-tabs__link">
        
  
  
    
  
  アワード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../resources/" class="md-tabs__link">
        
  
  
    
  
  動画など

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../" title="Copilot Developer Camp" class="md-nav__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    Copilot Developer Camp
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ようこそ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Maker 向けエージェントの作成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Maker 向けエージェントの作成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microsoft 365 Copilot 用エージェント作成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MAB - Copilot Studio agent builder を使用したエージェント作成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MAB1 - 最初のエージェント構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS - Microsoft Copilot Studio の概要
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS0 - セットアップ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS1 - 最初のエージェント
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-topics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS2 － トピックの定義
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS3 - ツールの定義
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-extending-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MCS4 - Microsoft 365 Copilot の拡張
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MCS5 - Power Platform custom connector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ラボ MCS6 - MCP サーバーの利用
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS6 - MCP サーバーの利用
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      演習 1 : MCP サーバーのセットアップ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      演習 2 : Copilot Studio で新しいエージェントを作成
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mcp-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      演習 3 : MCP サーバーと Copilot Studio の統合
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA - SharePoint エージェントの概要
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA1 - 最初の SharePoint エージェントを構築する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/02-sharing-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA2 - SharePoint エージェントの共有
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    宣言型エージェントの構築
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            宣言型エージェントの構築
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microsoft 365 Copilot の拡張
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    セットアップ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            セットアップ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E0 - セットアップ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    宣言型エージェントの基礎
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            宣言型エージェントの基礎
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01-typespec-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab E1 - Microsoft 365 Agents Toolkit で TypeSpec 定義を用いて初めての宣言型エージェントを構築する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01a-geolocator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E1 - インストラクションベースの Geo Locator Game エージェント
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API をゼロから構築して統合
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            API をゼロから構築して統合
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/02-build-the-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E2 - API の構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/03-add-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E3 - 宣言型エージェントと API プラグインの追加
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/04-enhance-api-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab E4 - API とプラグインの拡張
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/05-add-adaptive-card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E5 - Adaptive Card の追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    認証
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            認証
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06a-add-authentication-ttk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6a - Entra ID 認証を OAuth で追加 (Agents Toolkit)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06b-add-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6b - Entra ID 認証を OAuth で追加 (手動セットアップ)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06c-add-sso/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6c - Entra ID 認証とシングル サインオンの追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    インテグレーション
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            インテグレーション
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/07-add-graphconnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E7 - 統合: Microsoft Copilot Connector を使用して Trey Genie にナレッジ機能を追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    カスタム エンジン エージェントの構築
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            カスタム エンジン エージェントの構築
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    カスタム エンジン エージェントの構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    M365 Agents SDK ラボ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            M365 Agents SDK ラボ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概要 - M365 Agents SDK と Semantic Kernel でエージェントを構築する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA0 - 前提条件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/01-agent-in-foundry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA1 - Azure AI Foundry でエージェントを準備する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/02-agent-with-agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab BMA2 - M365 Agents SDK を使用した最初の エージェント 構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/03-agent-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA3 - Azure AI Foundry エージェント と M365 Agents SDK の統合
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/04-bring-agent-to-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MBA4 - エージェントを Copilot Chat に導入
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Teams AI library ラボ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Teams AI library ラボ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    イントロ - Teams AI Library で独自の エージェント を構築する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab BTA0 - 前提条件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/01-custom-engine-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab BTA1 - 最初のカスタムエンジン エージェント (Teams AI library)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/02-rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab BTA2 - Azure AI Search でデータをインデックス化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/03-powered-by-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab BTA3 - ユーザー エクスペリエンスの強化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/04-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA4 - シングル サインオン認証の追加
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/05-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA5 - 複雑なタスクを処理するアクションの追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    プロンプト エンジニアリング
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            プロンプト エンジニアリング
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../copilot-instructions/beginner-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    エージェント指示ラボ - エージェント指示の改善（初心者向け）
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../awards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    アワード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    動画など
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mcs6-mcp">ラボ MCS6 - MCP サーバーの利用</h1>
<p>このラボでは、Microsoft Copilot Studio で作成したエージェントを MCP (Model Context Protocol) サーバーで拡張する方法を学習します。具体的には、求人候補者のリストを管理するツールを提供する既存の MCP サーバーを利用します。MCP サーバーは次の機能を提供します。</p>
<ul>
<li>すべての候補者を一覧表示  </li>
<li>条件で候補者を検索  </li>
<li>新しい候補者を追加  </li>
<li>既存候補者の情報を更新  </li>
<li>候補者を削除  </li>
</ul>
<div class="lab-intro-video">
    <div style="flex: 1; min-width: 0;">
        <iframe  src="//www.youtube.com/embed/Y8KpHmmMqzc" frameborder="0" allowfullscreen style="width: 100%; aspect-ratio: 16/9;">          
        </iframe>
          <div>このビデオでラボの概要をご覧ください。</div>
    </div>
    <div style="flex: 1; min-width: 0;">
   <div class="floatwide">
   <div class="cc-lab-toc mcs-path">
     <img src="/copilot-camp/assets/images/path-icons/MCS-path-heading.png"></img>
     <div>
       <p>Microsoft Copilot Studio でエージェントを構築したい場合は、次のラボを実施してください</p>
       <ul>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/00-prerequisites/">MCS0 - セットアップ</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/01-first-agent/">MCS1 - 最初のエージェント</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/02-topics/">MCS2 - トピックの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/03-actions/">MCS3 - ツールの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/04-extending-m365-copilot/">MCS4 - Microsoft 365 Copilot の拡張</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/05-connectors/">MCS5 - カスタム コネクタの利用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">MCS6 - MCP サーバーの利用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/07-autonomous/">MCS7 - 自律型エージェントの作成</a></li>
       </ul>
     </div>
   </div>

   <script>
   (() => {

   // This script decorates the table of contents with a "you are here" indicator.
   const toc = document.getElementsByClassName('cc-lab-toc');
   for (const div of toc) {
       const lis = div.querySelectorAll('li');
       for (const li of lis) {
           const anchor = li.querySelector('a');
           if (location.href.includes(anchor.href)) {
               const span = document.createElement("span");
               span.innerHTML = "YOU&nbsp;ARE&nbsp;HERE";
               li.appendChild(span);
           }
       }    
   }
   })();
   </script>
   <!-- 
     <div class="cc-mcs-lab-steps">
       <h4>目次</h4>
       <cc-table-of-contents />
     </div> -->
   </div>
    </div>
</div>

<div class="admonition tip">
<p class="admonition-title">MCP について学ぶ</p>
<p>このラボでは MCP の概念を紹介し、Copilot Studio との統合方法を示します。MCP は AI アシスタントが外部データ ソースやツールへ安全に接続できる新しいプロトコルです。詳細は <a href="https://github.com/microsoft/mcp-for-beginners" target="_blank">Model Context Protocol (MCP) for beginners</a> のトレーニング コンテンツをご覧ください。</p>
</div>
<p>このラボで学習できること</p>
<ul>
<li>既存の MCP サーバーを構成し接続する方法  </li>
<li>外部サーバーの MCP ツールとリソースを利用する方法  </li>
<li>MCP サーバーを Copilot Studio エージェントと統合する方法  </li>
</ul>
<h2 id="1-mcp">演習 1 : MCP サーバーのセットアップ</h2>
<p>この演習では、人事候補者管理機能を提供するあらかじめ用意された MCP サーバーをセットアップします。サーバーは Microsoft .NET ベースで、C# 向け MCP SDK を使用しています。ここではサーバーをダウンロードし、ローカルで実行できるように構成します。</p>
<h3 id="1-mcp_1">手順 1: MCP サーバーと前提条件の理解</h3>
<p>このラボで使用する HR MCP サーバーは次のツールを提供します。</p>
<ul>
<li><strong>list_candidates</strong>: 候補者の一覧を取得  </li>
<li><strong>search_candidates</strong>: 名前、メール、スキル、現在の役職で候補者を検索  </li>
<li><strong>add_candidate</strong>: 候補者を追加  </li>
<li><strong>update_candidate</strong>: メールで既存候補者を更新  </li>
<li><strong>remove_candidate</strong>: メールで候補者を削除  </li>
</ul>
<p>サーバーが管理する候補者情報</p>
<ul>
<li>個人情報 (firstname, lastname, full name, email)  </li>
<li>職務情報 (spoken languages, skills, current role)  </li>
</ul>
<p>開始前に次を用意してください。</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download/dotnet/10.0" target="_blank">.NET 10.0 SDK (preview 6 以上)</a>  </li>
<li><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a>  </li>
<li><a href="https://nodejs.org/en" target="_blank">Node.js v.22 以上</a>  </li>
<li><a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a>  </li>
</ul>
<p><cc-end-step lab="mcs6" exercise="1" step="1" /></p>
<h3 id="2-mcp">手順 2: MCP サーバーのダウンロードと実行</h3>
<p>このラボでは、用意された HR MCP サーバーを使用します。サーバー ファイルを <a href="https://download-directory.github.io/?url=https://github.com/microsoft/copilot-camp/tree/main/src/make/copilot-studio/path-m-lab-mcs6-mcp/hr-mcp-server&amp;filename=hr-mcp-server" target="_blank">こちら</a> からダウンロードしてください。</p>
<p>zip を展開し、Visual Studio Code でフォルダーを開きます。サーバーは既に実装済みで、すぐに実行できます。</p>
<p><img alt="The outline of the HR MCP Server project in Visual Studio Code showing the server files and candidate data." src="../../../../../assets/images/make/copilot-studio-06/mcp-server-01.png" /></p>
<p>プロジェクト構成の主な要素</p>
<ul>
<li><code>Configuration</code>: サーバーの設定を定義する <code>HRMCPServerConfiguration.cs</code>  </li>
<li><code>Data</code>: 候補者リストを提供する <code>candidates.json</code>  </li>
<li><code>Services</code>: 候補者リストを読み込み管理する <code>ICandidateService.cs</code> と実装 <code>CandidateService.cs</code>  </li>
<li><code>Tools</code>: MCP ツールを定義する <code>HRTools.cs</code> とデータ モデルを定義する <code>Models.cs</code>  </li>
<li><code>DevTunnel_Instructions.MD</code>: dev tunnel で MCP サーバーを公開する手順  </li>
<li><code>Progam.cs</code>: MCP サーバーを初期化するエントリーポイント  </li>
</ul>
<p>Visual Studio Code 内で新しいターミナルを開くか、通常のターミナルを開き、次のコマンドで依存関係のインストール、ビルド、起動を行います。</p>
<pre><code class="language-console">dotnet run
</code></pre>
<p>MCP サーバーが起動していることを確認します。ブラウザーで <a href="http://localhost:47002/" target="_blank">http://localhost:47002/</a> にアクセスできるはずです。JSON 形式のエラーが表示されても問題ありません。MCP サーバーに到達できていることを示しています。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>このラボ提供の HR MCP サーバーは本番運用を想定したものではありません。候補者リストをメモリ上で保持し、複数の会話セッションをまたいでデータを保持しません。本ラボ用にシンプルかつわかりやすいサンプルとして作成されています。プロフェッショナル開発者の方は、HTTP で公開する MCP サーバー構築の基礎を学ぶ出発点としてご利用ください。必要に応じてコンテナー アプリ化や永続ストレージ追加で改良できます。たとえば <a href="https://github.com/fabianwilliams/hr-mcp-server" target="_blank">こちら</a> では <a href="https://github.com/fabianwilliams/" target="_blank">Fabian Williams (Microsoft)</a> が実装したより高度なバージョンを参照できます。</p>
</div>
<p><cc-end-step lab="mcs6" exercise="1" step="2" /></p>
<h3 id="3-dev-tunnel">手順 3: dev tunnel の構成</h3>
<p>次に、MCP サーバーをパブリック URL で公開します。ローカル開発マシンでサーバーを実行しているため、<code>localhost</code> をパブリック URL にマッピングするリバース プロキシが必要です。ここでは Microsoft 提供の dev tunnel を使用します。</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/dev-tunnels/get-started" target="_blank">こちらの手順</a> に従って dev tunnel をインストール  </li>
<li>次のコマンドで dev tunnel にログイン  </li>
</ul>
<pre><code class="language-console">devtunnel user login
</code></pre>
<ul>
<li>次のコマンドで dev tunnel をホスト  </li>
</ul>
<pre><code class="language-console">devtunnel create hr-mcp -a --host-header unchanged
devtunnel port create hr-mcp -p 47002
devtunnel host hr-mcp
</code></pre>
<p>コマンド ラインに接続情報が表示されます。</p>
<p><img alt="The dev tunnel running in a console window showing the hosting port, the connect via browser URL, and the URL to inspect network activity." src="../../../../../assets/images/make/copilot-studio-06/mcp-server-02.png" /></p>
<p>「Connect via browser」URL をコピーしておきます。ブラウザーでその URL にアクセスすると、以下のような確認ページが表示される場合があります。</p>
<p><img alt="The confirmation page to access the MCP server via the dev tunnel. There is a button to &quot;Continue&quot; that you should select." src="../../../../../assets/images/make/copilot-studio-06/mcp-server-03.png" /></p>
<p>このラボの演習中は dev tunnel と MCP サーバーを起動したままにしてください。再起動が必要な場合は <code>devtunnel host hr-mcp</code> を再実行します。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="3" /></p>
<h3 id="4-mcp">手順 4: MCP サーバーのテスト</h3>
<p>ローカル環境で MCP サーバーをテストします。簡単のため <a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a> を使用します。ターミナルを開き、次のコマンドを実行します。</p>
<pre><code class="language-console">npx @modelcontextprotocol/inspector
</code></pre>
<p>Node.js が MCP Inspector をダウンロードして実行し、次のような出力が表示されます。</p>
<p><img alt="The output of the MCP inspector when started in a terminal window. You have the proxy port that the MCP Inspector is listening on and the URL of the MCP Inspector." src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-01.png" /></p>
<p>ブラウザーが自動で起動し、次のインターフェースが表示されます。</p>
<p><img alt="The web interface of the MCP Inspector. On the left there are the settings to configure the MCP Server and the &quot;Connect&quot; button to connect to the actual MCP server." src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-02.png" /></p>
<p>MCP Inspector を次の設定で構成します。</p>
<ul>
<li>1️⃣ <strong>Transport type</strong>: Streamable HTTP  </li>
<li>2️⃣ <strong>URL</strong>: dev tunnel の「Connect via browser」でコピーした URL  </li>
</ul>
<p>続いて 3️⃣ <strong>Connect</strong> を選択して MCP サーバーに接続します。緑色のアイコンと <strong>Connected</strong> メッセージが表示されれば成功です。<br />
画面の Tools セクションで 1️⃣ <strong>List Tools</strong> を選択して MCP サーバーが公開しているツール一覧を取得します。<br />
次に 2️⃣ <strong>list_candidates</strong> ツールを選択し、3️⃣ <strong>Run tool</strong> でツールを実行します。</p>
<p><img alt="The web interface of the MCP Inspector when listing the tools and invoking the &quot;list_candidates&quot; tool. There are commands to &quot;List Tools&quot;, one item for each of the tools offered by the MCP server, and a command &quot;Run tool&quot; to invoke a single tool." src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-03.png" /></p>
<p>成功すると <strong>Success</strong> メッセージとツールの出力が表示されます。<br />
<strong>History</strong> セクションでは過去の呼び出し履歴を確認できます。</p>
<p><img alt="The web interface of the MCP Inspector when invoking a tool. There is a green successful message and the actual output of the tool invocation." src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-04.png" /></p>
<p>これで Microsoft Copilot Studio のエージェントから MCP サーバーを利用する準備が整いました。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="4" /></p>
<h2 id="2-copilot-studio">演習 2 : Copilot Studio で新しいエージェントを作成</h2>
<p>この演習では、演習 1 で構成した MCP サーバーを利用する新しいエージェントを Microsoft Copilot Studio で作成します。</p>
<h3 id="1">手順 1: 新しいエージェントの作成</h3>
<p>ブラウザーを開き、対象の Microsoft 365 テナントの作業アカウントで <a href="https://copilotstudio.microsoft.com" target="_blank">https://copilotstudio.microsoft.com</a> にアクセスします。</p>
<p>左ナビゲーション メニューで <code>Copilot Dev Camp</code> 環境を選択し、<strong>Create</strong> → <strong>Agent</strong> を選択して新しいエージェントを作成します。</p>
<p><strong>Skip to configure</strong> を選択し、以下の設定でエージェントを定義します。</p>
<ul>
<li><strong>Name</strong>: </li>
</ul>
<pre><code class="language-text">HR Agent with MCP
</code></pre>
<ul>
<li><strong>Description</strong>: </li>
</ul>
<pre><code class="language-text">An AI assistant that helps manage HR candidates using MCP server integration 
for comprehensive candidate management
</code></pre>
<ul>
<li><strong>Instructions</strong>: </li>
</ul>
<pre><code class="language-text">You are a helpful HR assistant that specializes in candidate management. You can help users search 
for candidates, check their availability, get detailed candidate information, and add new 
candidates to the system. 
Always provide clear and helpful information about candidates, including their skills, experience, 
contact details, and availability status.
</code></pre>
<p><img alt="The agent creation dialog in Copilot Studio with the name, description, and instructions filled in for the HR Agent with MCP." src="../../../../../assets/images/make/copilot-studio-06/create-agent-01.png" /></p>
<p><strong>Create</strong> を選択してエージェントを作成します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="1" /></p>
<h3 id="2">手順 2: エージェントの会話スターターを構成</h3>
<p>エージェント作成後、設定ページが表示されます。<strong>Suggested prompts</strong> セクションで次のプロンプトを追加します。</p>
<ol>
<li>Title: <code>List all candidates</code> - Prompt: <code>List all the candidates</code>  </li>
<li>Title: <code>Search candidates</code> - Prompt: <code>Search for candidates with name [NAME_TO_SEARCH]</code>  </li>
<li>Title: <code>Add new candidate</code> - Prompt: <code>Add a candidate with firstname [FIRSTNAME], lastname [LASTNAME],  e-mail [EMAIL], role [ROLE], spoken languages [LANGUAGES], and skills [SKILLS]</code>  </li>
</ol>
<p><img alt="The agent configuration page showing the &quot;Suggested prompts&quot; sections filled in with the suggested information." src="../../../../../assets/images/make/copilot-studio-06/configure-agent-01.png" /></p>
<p><strong>Save</strong> を選択して変更を保存します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="2" /></p>
<h2 id="3-mcp-copilot-studio">演習 3 : MCP サーバーと Copilot Studio の統合</h2>
<p>この演習では、MCP サーバーと Copilot Studio エージェントの統合を構成します。</p>
<h3 id="1-mcp_2">手順 1: MCP サーバーが公開するツールの追加</h3>
<p>エージェントで 1️⃣ <strong>Tools</strong> セクションに移動し、2️⃣ <strong>+ Add a tool</strong> を選択します。</p>
<p><img alt="The &quot;Tools&quot; section of the agent with the &quot;+ Add a tool&quot; command highlighted." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-01.png" /></p>
<p>1️⃣ <strong>Model Context Protocol</strong> グループを選択して利用可能な MCP サーバー一覧を表示します。続いて 2️⃣ <strong>+ New tool</strong> を選択し、HR MCP サーバーを追加します。</p>
<p><img alt="The panel to add new tools, with the &quot;+ New tool&quot; command highlighted." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-02.png" /></p>
<p>表示されるダイアログでツールの種類を選択します。<strong>Model Context Protocol</strong> を選ぶと、公式ドキュメント <a href="https://learn.microsoft.com/en-us/microsoft-copilot-studio/agent-extend-action-mcp" target="_blank">Extend your agent with Model Context Protocol</a> に移動しますが、このラボでは実際に Power Platform のカスタム コネクタを作成します。<br />
<strong>Custom connector</strong> を選択して進めます。</p>
<p><img alt="The dialog to add a new tool with the &quot;Custom connector&quot; option highlighted." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-03.png" /></p>
<p>新しいブラウザー タブで Power Apps のカスタム コネクタ管理ページが開きます。1️⃣ <strong>+ New custom connector</strong> → 2️⃣ <strong>Import an OpenAPI file</strong> を選択します。</p>
<p><img alt="The dialog to add a new tool with the &quot;Custom connector&quot; option highlighted." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-04.png" /></p>
<p>この作業を保留し、Visual Studio Code に戻って新しいファイルを作成し、次の YAML スキーマを貼り付けます。</p>
<pre><code class="language-yaml">swagger: '2.0'
info:
  title: HR MCP Server
  description: Allows to manage candidates for specific job roles providing tools to list, search, add, update, and remove candidates from a reference list
  version: 1.0.0
host: [Connect via browser host name of your dev tunnel]
basePath: /
schemes:
  - https
paths:
  /:
    post:
      summary: HR MCP Server
      x-ms-agentic-protocol: mcp-streamable-1.0
      operationId: InvokeMCP
      responses:
        '200':
          description: Success
</code></pre>
<p><code>host</code> を dev tunnel のホスト名に置き換えます。<br />
<code>https://</code> や末尾の <code>/</code> は含めず、例: <code>3dcwb74w-47002.euw.devtunnels.ms</code> のみを設定します。ファイルを保存し、ブラウザーに戻ります。</p>
<p>コネクタ名を <code>HR MCP Server</code> など任意で入力し、<strong>Import</strong> を選択して先ほどの OpenAPI ファイルを選択します。ファイルを選択後 <strong>Continue</strong> をクリックします。</p>
<p><img alt="The dialog to create a new &quot;Custom connector&quot; in the current Power Platform environment. There are the name of the connector and the path to the OpenAPI specification YAML file." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-05.png" /></p>
<p>コネクタの設定ページで <strong>Swagger editor</strong> を有効にして OpenAPI のソースを表示し、内容を確認します。</p>
<p><img alt="The &quot;Custom connector&quot; definition page in the current Power Platform environment. There is the &quot;Swagger editor&quot; option selected to see the source code of the OpenAPI specification file." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-06.png" /></p>
<p><strong>Create connector</strong> を選択して作成が完了するまで待ちます。必要ならコネクタ用アイコンも設定できます。たとえば <a href="https://raw.githubusercontent.com/microsoft/copilot-camp/refs/heads/main/src/make/copilot-studio/path-m-lab-mcs6-mcp/hr-mcp-server-icon.png" target="_blank">こちらのアイコン</a> をダウンロードして設定し、<strong>Update connector</strong> で保存します。</p>
<p>Copilot Studio に戻り、<strong>Refresh</strong> を選択してツール一覧を更新します。</p>
<p><img alt="The dialog to add a new tool in Copilot Studio with a dialog waiting for you to select the &quot;Refresh&quot; button to reload the list of available tools." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-07.png" /></p>
<p><strong>Model Context Protocol</strong> リストに <code>HR MCP Server</code> が表示されるはずです。</p>
<p><img alt="The list of &quot;Model Context Protocol&quot; tools, including the new &quot;HR MCP Server&quot; connector." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-08.png" /></p>
<p><code>HR MCP Server</code> コネクタを選択し、Copilot Studio の既定の接続 UX でサーバーに接続します。接続後 <strong>Add and configure</strong> を選択します。</p>
<p><img alt="The dialog to add the &quot;HR MCP Server&quot; connector as a tool to the current agent in Copilot Studio. There are buttons to &quot;Add to agent&quot; and to &quot;Add and configure&quot;, as well as a button to &quot;Cancel&quot;." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-09.png" /></p>
<p>MCP サーバーが公開するすべてのツールがエージェントで利用可能になりました。</p>
<p><img alt="The details about the settings and tools of the MCP server that you just registered. There is the list of tools exposed by the server." src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-10.png" /></p>
<p><cc-end-step lab="mcs6" exercise="3" step="1" /></p>
<h3 id="2-mcp_1">手順 2: MCP サーバー統合のテスト</h3>
<p>右上の <strong>Publish</strong> を選択してエージェントを公開します。公開後、統合テスト パネルで次のプロンプトを使用します。</p>
<pre><code class="language-text">List all candidates
</code></pre>
<p>エージェントは MCP サーバーの <code>list_candidates</code> ツールを使用して候補者一覧を返すはずです。<br />
ただし一覧を取得するにはコネクタへの接続が必要なため、Copilot Studio から <strong>Open connection manager</strong> が求められます。接続後 <strong>Retry</strong> を選択します。</p>
<p><img alt="The initial dialog with the agent, which prompts the user to open the connection manager to connect to the MCP server and then to retry the request, once the connection is established." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-01.png" /></p>
<p>接続が完了すると候補者一覧が取得できます。</p>
<p><img alt="The list of candidates retrieved from the HR MCP Server." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-02.png" /></p>
<div class="admonition tip">
<p class="admonition-title">ローカルでの MCP サーバー デバッグ</p>
<p>開発者の方は <code>HRTools.cs</code> にブレークポイントを設定し、Visual Studio Code でデバッガーをアタッチして MCP サーバーの動作を詳細に確認できます。</p>
</div>
<p>エージェントを Microsoft 365 Copilot Chat でも利用可能にできます。1️⃣ <strong>Channels</strong> → 2️⃣ <strong>Teams and Microsoft 365 Copilot</strong> を開き、3️⃣ <strong>Make agent available in Microsoft 365 Copilot</strong> をチェックし、4️⃣ <strong>Add channel</strong> を選択します。チャネルが有効化されたらパネルを閉じ、再度 <strong>Publish</strong> してください。</p>
<p><img alt="The interface to publish an agent in the &quot;Teams and Microsoft 365 Copilot&quot; channel. There is a checkbox to make the agent available in Microsoft 365 Copilot and a command to &quot;Add channel&quot;." src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-01.png" /></p>
<p>再度 <strong>Teams and Microsoft 365 Copilot</strong> チャネルを開き、<strong>See agent in Microsoft 365</strong> を選択してエージェントを Microsoft 365 Copilot に追加します。</p>
<p><img alt="The interface to publish an agent in the &quot;Teams and Microsoft 365 Copilot&quot; channel with the &quot;See agent in Microsoft 365&quot; command highlighted." src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-02.png" /></p>
<p>エージェント追加画面で <strong>Add</strong> → <strong>Open</strong> を選択し、Microsoft 365 Copilot でエージェントを試します。</p>
<div class="admonition info">
<p class="admonition-title">エージェントの詳細</p>
<p><strong>Teams and Microsoft 365 Copilot</strong> チャネル設定パネルで、説明やカスタム アイコンなど追加情報を設定できます。</p>
</div>
<p><img alt="The interface to add the agent to Microsoft 365 Copilot. There are information about the agent and a command to &quot;Add&quot; the agent to Microsoft 365 Copilot." src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-03.png" /></p>
<p>Microsoft 365 Copilot でエージェントの UI に提案プロンプトが表示されます。たとえば次のプロンプトを試してください。</p>
<pre><code class="language-text">Search for candidate Alice
</code></pre>
<p><img alt="The Microsoft 365 Copilot chat interface with the suggested prompts configured for the &quot;HR Agent with MCP&quot; and the prompt &quot;Search for candidate Alice&quot; ready to be processed." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-01.png" /></p>
<p>エージェントは MCP サーバーの <code>search_candidates</code> ツールを使用し、該当候補者のみを返します。ただし Microsoft 365 Copilot でもコネクタ接続が必要なため、再度接続マネージャーで接続を行います。</p>
<p><img alt="The Microsoft 365 Copilot chat instructing the user to &quot;Open the connection manager&quot; to verify credentials and connect to the MCP server." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-02.png" /></p>
<p>接続後、再度プロンプトを実行すると期待通りの結果が得られます。</p>
<p><img alt="Microsoft 365 Copilot showing information about the candidate Alice Johnson, who is matching the search criteria defined in the prompt." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-03.png" /></p>
<p>次に <code>add_candidate</code> ツールを使い、新しい候補者を追加してみましょう。次のプロンプトを使用します。</p>
<pre><code class="language-text">Add a new candidate: John Smith, Software Engineer, skills: React, Node.js, 
email: john.smith@email.com, speaks English and Spanish
</code></pre>
<p>エージェントは意図を理解し、<code>add_candidate</code> ツールに必要な入力パラメーターを抽出して実行します。サーバーからは確認メッセージが返されます。</p>
<p><img alt="The agent confirming that a new candidate has been added to the HR system via the MCP Server." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-04.png" /></p>
<p>もう一度候補者一覧を表示すると <code>John Smith</code> が追加されていることを確認できます。</p>
<p><img alt="The updated list of candidates retrieved from the HR system via the MCP Server. The newly added candidate with name John Smith is at the end of the list." src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-05.png" /></p>
<p>他にも次のようなプロンプトで試してみてください。</p>
<pre><code class="language-text">Update the candidate with email bob.brown@example.com to speak also French
</code></pre>
<p>または</p>
<pre><code class="language-text">Add skill &quot;Project Management&quot; to candidate bob.brown@example.com
</code></pre>
<p>または</p>
<pre><code class="language-text">Remove candidate bob.brown@example.com
</code></pre>
<p>エージェントは適切なツールを呼び出し、プロンプトに従って動作します。</p>
<p>お疲れさまでした！ エージェントは完全に機能し、HR MCP サーバーが公開するすべてのツールを利用できます。</p>
<p><cc-end-step lab="mcs6" exercise="3" step="2" /></p>
<p><span style="font-size: large; font-weight: bold; color: #1c8fd2;">おめでとうございます！</span></p>
<p>これでラボ MCS6 - MCP サーバーの利用 を完了しました！</p>
<!-- <a href="../07-autonomous">Start here</a> with Lab MCS7, to learn how to create autonomous agents in Copilot Studio.
<cc-next />  -->

<p><img src="https://m365-visitor-stats.azurewebsites.net/copilot-camp/make/copilot-studio/06-mcp--ja" /></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.integrate", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../../../../javascripts/cc-award.js"></script>
      
        <script src="../../../../../javascripts/cc-next.js"></script>
      
        <script src="../../../../../javascripts/cc-lab-step.js"></script>
      
        <script src="../../../../../javascripts/cc-card.js"></script>
      
    
  </body>
</html>