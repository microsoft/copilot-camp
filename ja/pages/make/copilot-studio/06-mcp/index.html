
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">
      
      
        <link rel="prev" href="../05-connectors/">
      
      
        <link rel="next" href="../../sharepoint-agents/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>ラボ MCS6 - MCP サーバーの利用 - Copilot Developer Camp</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/labStyles.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mcs6-mcp" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../../../../" title="Copilot Developer Camp" class="md-header__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Copilot Developer Camp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ラボ MCS6 - MCP サーバーの利用
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="言語切り替え">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../../pages/make/copilot-studio/06-mcp/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ja" class="md-select__link">
              Japanese (日本語)
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../" class="md-tabs__link">
        
  
  
    
  
  ようこそ

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Maker 向けエージェントの作成

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../extend-m365-copilot/" class="md-tabs__link">
          
  
  
  宣言型エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../custom-engine/" class="md-tabs__link">
          
  
  
  カスタム エンジン エージェントの構築

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../copilot-instructions/beginner-agent/" class="md-tabs__link">
          
  
  
  プロンプト エンジニアリング

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../awards/" class="md-tabs__link">
        
  
  
    
  
  アワード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../resources/" class="md-tabs__link">
        
  
  
    
  
  動画など

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../" title="Copilot Developer Camp" class="md-nav__button md-logo" aria-label="Copilot Developer Camp" data-md-component="logo">
      
  <img src="../../../../../assets/images/tent-small.png" alt="logo">

    </a>
    Copilot Developer Camp
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/copilot-camp" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/copilot-camp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ようこそ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Maker 向けエージェントの作成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Maker 向けエージェントの作成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microsoft 365 Copilot 用エージェントの作成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MAB - Copilot Studio エージェント ビルダーによるエージェント作成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MAB1 - 最初のエージェント構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MCS - Microsoft Copilot Studio の概要
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS0 - セットアップ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS1 - 最初のエージェント
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-topics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MCS2 - トピックの定義
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS3 - ツールの定義
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-extending-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS4 - Microsoft 365 Copilot の拡張
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS5 - Power Platform カスタム コネクタ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ラボ MCS6 - MCP サーバーの利用
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ラボ MCS6 - MCP サーバーの利用
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      演習 1 : MCP サーバーのセットアップ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      演習 2 : Copilot Studio で新しいエージェントを作成
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mcp-copilot-studio" class="md-nav__link">
    <span class="md-ellipsis">
      演習 3 : MCP サーバーと Copilot Studio の統合
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA - SharePoint エージェントの理解
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/01-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA1 - 最初の SharePoint エージェントを作成する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sharepoint-agents/02-sharing-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ MSA2 - SharePoint エージェントの共有
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    宣言型エージェントの構築
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            宣言型エージェントの構築
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microsoft 365 Copilot の拡張
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    セットアップ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            セットアップ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E0 - セットアップ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    宣言型エージェントの基礎
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            宣言型エージェントの基礎
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01-typespec-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E1 - Microsoft 365 Agents Toolkit で TypeSpec 定義を使用して初めての Declarative エージェントを構築する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/01a-geolocator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E1 - 指示ベース Geo Locator ゲーム エージェント
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API をゼロから構築して統合
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            API をゼロから構築して統合
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/02-build-the-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E2 - API の構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/03-add-declarative-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E3 - 宣言型 エージェント と API プラグインの追加
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/04-enhance-api-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E4 - API とプラグインを拡張する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/05-add-adaptive-card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab E5 - Adaptive Cards の追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    認証
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            認証
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06a-add-authentication-ttk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6a - Entra ID 認証を OAuth で追加 (Agents Toolkit)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06b-add-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6b - OAuth を使用した Entra ID 認証の追加 (手動セットアップ)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/06c-add-sso/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E6c - Entra ID 認証と Single Sign-on の追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    インテグレーション
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            インテグレーション
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../extend-m365-copilot/07-add-graphconnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ E7 - 統合: Microsoft Copilot Connector を使用して Trey Genie にナレッジ機能を追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    カスタム エンジン エージェントの構築
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            カスタム エンジン エージェントの構築
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    カスタムエンジン エージェントの構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    M365 Agents SDK ラボ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            M365 Agents SDK ラボ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    イントロ - M365 Agents SDK と Semantic Kernel を使用したエージェント構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA0 - 前提条件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/01-agent-in-foundry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA1 - Azure AI Foundry でエージェントを準備する
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/02-agent-with-agents-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA2 - M365 Agents SDK を使用して最初のエージェントを構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/03-agent-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BMA3 - Azure AI Foundry エージェントを M365 Agents SDK と統合
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/agents-sdk/04-bring-agent-to-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab MBA4 - エージェントを Copilot Chat に導入
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Teams AI library ラボ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Teams AI library ラボ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    イントロ ― Teams AI Library を使用した独自エージェント構築
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/00-prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA0 - 前提条件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/01-custom-engine-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA1 - Teams AI ライブラリでの最初のカスタム エンジン エージェント
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/02-rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA2 - Azure AI Search でデータをインデックス
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/03-powered-by-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA3 - ユーザー エクスペリエンスの向上
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/04-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA4 - シングル サインオン認証の追加
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../custom-engine/teams-ai/05-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ラボ BTA5 - 複雑なタスクを処理するアクションの追加
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    プロンプト エンジニアリング
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            プロンプト エンジニアリング
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../copilot-instructions/beginner-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    エージェント指示ラボ - エージェント指示の改善（初心者向け）
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../awards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    アワード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    動画など
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mcs6-mcp">ラボ MCS6 - MCP サーバーの利用</h1>
<p>このラボでは、Microsoft Copilot Studio で作成したエージェントを MCP（Model Context Protocol）サーバーで拡張する方法を学習します。具体的には、架空の求人候補者リストを管理するためのツールを提供する既存の MCP サーバーを利用します。MCP サーバーは以下の機能を提供します。</p>
<ul>
<li>すべての候補者を一覧表示  </li>
<li>条件で候補者を検索  </li>
<li>新しい候補者を追加  </li>
<li>既存候補者情報を更新  </li>
<li>候補者を削除  </li>
</ul>
<div class="lab-intro-video">
    <div style="flex: 1; min-width: 0;">
        <iframe  src="//www.youtube.com/embed/Y8KpHmmMqzc" frameborder="0" allowfullscreen style="width: 100%; aspect-ratio: 16/9;">          
        </iframe>
          <div>この動画でラボの概要をご確認ください。</div>
    </div>
    <div style="flex: 1; min-width: 0;">
   <div class="floatwide">
   <div class="cc-lab-toc mcs-path">
     <img src="/copilot-camp/assets/images/path-icons/MCS-path-heading.png"></img>
     <div>
       <p>Microsoft Copilot Studio でエージェントを構築したい場合は、次のラボを実施してください</p>
       <ul>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/00-prerequisites/">MCS0 - セットアップ</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/01-first-agent/">MCS1 - 最初のエージェント</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/02-topics/">MCS2 - トピックの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/03-actions/">MCS3 - ツールの定義</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/04-extending-m365-copilot/">MCS4 - Microsoft 365 Copilot の拡張</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/05-connectors/">MCS5 - カスタム コネクタの利用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/06-mcp/">MCS6 - MCP サーバーの利用</a></li>
         <li><a href="/copilot-camp/ja/pages/make/copilot-studio/07-autonomous/">MCS7 - 自律型エージェントの作成</a></li>
       </ul>
     </div>
   </div>

   <script>
   (() => {

   // This script decorates the table of contents with a "you are here" indicator.
   const toc = document.getElementsByClassName('cc-lab-toc');
   for (const div of toc) {
       const lis = div.querySelectorAll('li');
       for (const li of lis) {
           const anchor = li.querySelector('a');
           if (location.href.includes(anchor.href)) {
               const span = document.createElement("span");
               span.innerHTML = "YOU&nbsp;ARE&nbsp;HERE";
               li.appendChild(span);
           }
       }    
   }
   })();
   </script>
   <!-- 
     <div class="cc-mcs-lab-steps">
       <h4>目次</h4>
       <cc-table-of-contents />
     </div> -->
   </div>
    </div>
</div>

<div class="admonition tip">
<p class="admonition-title">MCP について学ぶ</p>
<p>このラボでは MCP の概念を紹介し、Copilot Studio との統合方法を示します。MCP は AI アシスタントが外部データソースやツールに安全に接続できるようにする新しいプロトコルです。詳しくは <a href="https://github.com/microsoft/mcp-for-beginners" target="_blank">Model Context Protocol (MCP) for beginners</a> の資料をご覧ください。</p>
</div>
<p>このラボで学ぶこと</p>
<ul>
<li>既存の MCP サーバーを構成して接続する方法  </li>
<li>外部サーバーの MCP ツールとリソースを利用する方法  </li>
<li>MCP サーバーを Copilot Studio エージェントと統合する方法  </li>
</ul>
<h2 id="1-mcp">演習 1 : MCP サーバーのセットアップ</h2>
<p>この演習では、人事候補者管理機能を提供する事前構築済み MCP サーバーをセットアップします。サーバーは Microsoft .NET をベースに MCP SDK for C# を使用しています。ここではサーバーをダウンロードして構成し、ローカルで実行できるようにします。</p>
<h3 id="1-mcp_1">手順 1: MCP サーバーと前提条件の理解</h3>
<p>このラボで使用する HR MCP サーバーは次のツールを提供します。</p>
<ul>
<li><strong>list_candidates</strong>: 候補者一覧を取得  </li>
<li><strong>search_candidates</strong>: 名前、メール、スキル、現在の職務で候補者を検索  </li>
<li><strong>add_candidate</strong>: 新しい候補者を追加  </li>
<li><strong>update_candidate</strong>: メールアドレスで既存候補者を更新  </li>
<li><strong>remove_candidate</strong>: メールアドレスで候補者を削除  </li>
</ul>
<p>サーバーは次の候補者情報を管理します。</p>
<ul>
<li>個人情報（名、姓、氏名、メール）  </li>
<li>職務情報（使用言語、スキル、現在の職務）  </li>
</ul>
<p>開始前に以下を用意してください。</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download/dotnet/10.0" target="_blank">.NET 10.0 SDK (preview 6 以上)</a>  </li>
<li><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a>  </li>
<li><a href="https://nodejs.org/en" target="_blank">Node.js v.22 以上</a>  </li>
<li><a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a>  </li>
</ul>
<p><cc-end-step lab="mcs6" exercise="1" step="1" /></p>
<h3 id="2-mcp">手順 2: MCP サーバーのダウンロードと実行</h3>
<p>このラボでは、事前構築済み HR MCP サーバーを使用します。サーバーファイルを <a href="https://download-directory.github.io/?url=https://github.com/microsoft/copilot-camp/tree/main/src/make/copilot-studio/path-m-lab-mcs6-mcp/hr-mcp-server&amp;filename=hr-mcp-server" target="_blank">こちら</a> からダウンロードしてください。</p>
<p>zip を展開し、対象フォルダーを Visual Studio Code で開きます。サーバーはすでに実装済みで、すぐに実行できます。</p>
<p><img alt="Visual Studio Code で HR MCP サーバープロジェクトのアウトラインを表示。サーバーファイルと候補者データが見える。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-01.png" /></p>
<p>プロジェクトの主な構成要素は次のとおりです。</p>
<ul>
<li><code>Configuration</code>: MCP サーバーの構成設定を定義する <code>HRMCPServerConfiguration.cs</code>  </li>
<li><code>Data</code>: 候補者一覧を保持する <code>candidates.json</code>  </li>
<li><code>Services</code>: 候補者一覧を読み込み管理するサービス <code>ICandidateService.cs</code> と <code>CandidateService.cs</code>  </li>
<li><code>Tools</code>: MCP ツールを定義する <code>HRTools.cs</code> とツールが使用するデータモデルを定義する <code>Models.cs</code>  </li>
<li><code>DevTunnel_Instructions.MD</code>: MCP サーバーを dev tunnel で公開する方法  </li>
<li><code>Progam.cs</code>: MCP サーバーを初期化するメインエントリーポイント  </li>
</ul>
<p>Visual Studio Code から新しいターミナルを開くか、別のターミナルを起動し、次のコマンドで依存関係をインストール、ビルド、起動します。</p>
<pre><code class="language-console">dotnet run
</code></pre>
<p>MCP サーバーが起動していることを確認します。ブラウザーで <a href="http://localhost:47002/" target="_blank">http://localhost:47002/</a> にアクセスできれば OK です。JSON のエラーメッセージが表示されますが、これは MCP サーバーに到達していることを示しています。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>このラボ付属の HR MCP サーバーは製品環境向けではありません。メモリ上の候補者リストを使用し、複数の会話セッション間でデータを保持しません。HTTP で公開された MCP サーバーの基本を学ぶための単純でわかりやすいサンプルとして提供されています。プロフェッショナル開発者の方は、これを出発点としてコンテナーアプリ化や永続ストレージ追加による改良を検討できます。たとえば <a href="https://github.com/fabianwilliams/hr-mcp-server" target="_blank">こちら</a> に <a href="https://github.com/fabianwilliams/" target="_blank">Fabian Williams (Microsoft)</a> が実装したより高度なサーバーがあります。</p>
</div>
<p><cc-end-step lab="mcs6" exercise="1" step="2" /></p>
<h3 id="3-dev-tunnel">手順 3: dev tunnel の構成</h3>
<p>次に、MCP サーバーをパブリック URL で公開する必要があります。ローカル開発マシンでサーバーを実行しているため、リバースプロキシツールを使用して <code>localhost</code> を公開 URL にマッピングします。ここでは、Microsoft が提供する dev tunnel ツールを使います。</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/developer/dev-tunnels/get-started" target="_blank">こちらの手順</a> に従い dev tunnel をインストール  </li>
<li>次のコマンドで dev tunnel にログイン  </li>
</ul>
<pre><code class="language-console">devtunnel user login
</code></pre>
<ul>
<li>次のコマンドで dev tunnel をホスト  </li>
</ul>
<pre><code class="language-console">devtunnel create hr-mcp -a --host-header unchanged
devtunnel port create hr-mcp -p 47002
devtunnel host hr-mcp
</code></pre>
<p>コマンドラインに接続情報が表示されます。</p>
<p><img alt="コンソールで dev tunnel を実行した例。ホスティングポートや「Connect via browser」URL、ネットワークアクティビティを検査する URL が表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-02.png" /></p>
<p>「Connect via browser」の URL をコピーして保存します。ブラウザーでその URL にアクセスすると、次のような確認ページが表示される場合があります。</p>
<p><img alt="dev tunnel 経由で MCP サーバーにアクセスする際の確認ページ。「Continue」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-server-03.png" /></p>
<p>このラボの作業中は、dev tunnel のコマンドと MCP サーバーの両方を起動したままにしてください。再起動が必要な場合は <code>devtunnel host hr-mcp</code> を再度実行します。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="3" /></p>
<h3 id="4-mcp">手順 4: MCP サーバーのテスト</h3>
<p>ローカル環境で MCP サーバーをテストできるようになりました。簡単のために <a href="https://github.com/modelcontextprotocol/inspector" target="_blank">MCP Inspector</a> を使用します。ターミナルを開き、次のコマンドを実行します。</p>
<pre><code class="language-console">npx @modelcontextprotocol/inspector
</code></pre>
<p>Node.js エンジンが MCP Inspector をダウンロードして起動し、ターミナルには次のような出力が表示されます。</p>
<p><img alt="ターミナルで MCP Inspector を起動した時の出力。Inspector がリッスンしているプロキシポートと URL が表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-01.png" /></p>
<p>ブラウザーが自動で起動し、次のインターフェイスが表示されます。</p>
<p><img alt="MCP Inspector の Web インターフェイス。左側に MCP サーバー設定と「Connect」ボタンがある。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-02.png" /></p>
<p>MCP Inspector を次の設定で構成します。</p>
<ul>
<li>1️⃣ <strong>Transport type</strong>: Streamable HTTP  </li>
<li>2️⃣ <strong>URL</strong>: dev tunnel の「Connect via browser」で保存した URL  </li>
</ul>
<p>次に 3️⃣ <strong>Connect</strong> ボタンを選択して MCP サーバーへの接続を開始します。接続に成功すると、緑の丸と <strong>Connected</strong> メッセージが表示されます。<br />
画面の Tools セクションで 1️⃣ <strong>List Tools</strong> を選択して MCP サーバーが公開しているツール一覧を取得します。<br />
続いて 2️⃣ <strong>list_candidates</strong> ツールを選択し、3️⃣ <strong>Run tool</strong> を選択してツールを実行します。</p>
<p><img alt="MCP Inspector でツール一覧を取得し、「list_candidates」ツールを実行している様子。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-03.png" /></p>
<p>成功すると <strong>Success</strong> と緑で表示され、ツール実行結果が表示されます。<strong>History</strong> セクションでは、MCP サーバーへのすべての呼び出し履歴を確認できます。</p>
<p><img alt="ツール呼び出しが成功し、実行結果が表示されている MCP Inspector の画面。" src="../../../../../assets/images/make/copilot-studio-06/mcp-inspector-04.png" /></p>
<p>これで Microsoft Copilot Studio のエージェントから MCP サーバーを利用する準備が整いました。</p>
<p><cc-end-step lab="mcs6" exercise="1" step="4" /></p>
<h2 id="2-copilot-studio">演習 2 : Copilot Studio で新しいエージェントを作成</h2>
<p>この演習では、演習 1 で構成した MCP サーバーを利用する新しいエージェントを Microsoft Copilot Studio で作成します。</p>
<h3 id="1">手順 1: 新しいエージェントの作成</h3>
<p>ブラウザーで、対象 Microsoft 365 テナントの作業アカウントを使用し <a href="https://copilotstudio.microsoft.com" target="_blank">https://copilotstudio.microsoft.com</a> にアクセスします。</p>
<p>左ナビゲーションで <strong>Copilot Dev Camp</strong> 環境（<a href="../00-prerequisites/">ラボ MCS0 - Setup</a> の <strong>演習 1</strong> で作成）を選択し、<strong>Create</strong> → <strong>Agent</strong> の順に選択します。</p>
<p><strong>Skip to configure</strong> を選択し、以下の設定で新しいエージェントを定義します。</p>
<ul>
<li><strong>Name</strong>: </li>
</ul>
<pre><code class="language-text">HR Agent with MCP
</code></pre>
<ul>
<li><strong>Description</strong>: </li>
</ul>
<pre><code class="language-text">An AI assistant that helps manage HR candidates using MCP server integration 
for comprehensive candidate management
</code></pre>
<ul>
<li><strong>Instructions</strong>: </li>
</ul>
<pre><code class="language-text">You are a helpful HR assistant that specializes in candidate management. You can help users search 
for candidates, check their availability, get detailed candidate information, and add new 
candidates to the system. 
Always provide clear and helpful information about candidates, including their skills, experience, 
contact details, and availability status.
</code></pre>
<p><img alt="Copilot Studio のエージェント作成ダイアログ。名前、説明、指示が入力された HR Agent with MCP の例。" src="../../../../../assets/images/make/copilot-studio-06/create-agent-01.png" /></p>
<p><strong>Create</strong> を選択してエージェントを作成します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="1" /></p>
<h3 id="2">手順 2: 会話スターターの構成</h3>
<p>エージェント作成後、エージェント構成ページが開きます。<strong>Suggested prompts</strong> セクションに次のプロンプトを追加します。</p>
<ol>
<li>Title: <code>List all candidates</code> - Prompt: <code>List all the candidates</code>  </li>
<li>Title: <code>Search candidates</code> - Prompt: <code>Search for candidates with name [NAME_TO_SEARCH]</code>  </li>
<li>Title: <code>Add new candidate</code> - Prompt: <code>Add a candidate with firstname [FIRSTNAME], lastname [LASTNAME],  e-mail [EMAIL], role [ROLE], spoken languages [LANGUAGES], and skills [SKILLS]</code>  </li>
</ol>
<p><img alt="エージェント構成ページの「Suggested prompts」セクションに情報を入力した例。" src="../../../../../assets/images/make/copilot-studio-06/configure-agent-01.png" /></p>
<p><strong>Save</strong> ボタンを選択して変更を保存します。</p>
<p><cc-end-step lab="mcs6" exercise="2" step="2" /></p>
<h2 id="3-mcp-copilot-studio">演習 3 : MCP サーバーと Copilot Studio の統合</h2>
<p>この演習では、MCP サーバーと Copilot Studio エージェントの統合を構成します。</p>
<h3 id="1-mcp_2">手順 1: MCP サーバーで公開されているツールの追加</h3>
<p>エージェントの 1️⃣ <strong>Tools</strong> セクションに移動し、2️⃣ <strong>+ Add a tool</strong> を選択します。</p>
<p><img alt="エージェントの「Tools」セクションで「+ Add a tool」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-01.png" /></p>
<p>1️⃣ <strong>Model Context Protocol</strong> グループを選択して、エージェントで利用可能な MCP サーバー一覧を表示します。続いて 2️⃣ <strong>+ New tool</strong> を選択して HR MCP サーバーを追加します。</p>
<p><img alt="新しいツール追加パネルで「+ New tool」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-02.png" /></p>
<p>どの種類のツールを追加するか選択するダイアログが表示されます。執筆時点で <strong>Model Context Protocol</strong> を選択すると、公式ドキュメント <a href="https://learn.microsoft.com/en-us/microsoft-copilot-studio/agent-extend-action-mcp" target="_blank">Extend your agent with Model Context Protocol</a> が開き、Power Platform のカスタムコネクターとして MCP サーバーを追加する方法が案内されます。</p>
<p>このラボでは実際に MCP サーバー用のカスタムコネクターを作成します。<strong>Custom connector</strong> を選択し、以下の手順を進めてください。 </p>
<p><img alt="新しいツール追加ダイアログで「Custom connector」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-03.png" /></p>
<p>新しいブラウザータブで Power Apps のカスタムコネクター管理ページが開きます。1️⃣ <strong>+ New custom connector</strong> → 2️⃣ <strong>Import an OpenAPI file</strong> を選択します。</p>
<p><img alt="カスタムコネクター作成ダイアログ。「Import an OpenAPI file」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-04.png" /></p>
<p>このまま保留し、Visual Studio Code に戻って新しいファイルを作成し、次の YAML スキーマを貼り付けます。</p>
<pre><code class="language-yaml">swagger: '2.0'
info:
  title: HR MCP Server
  description: Allows to manage candidates for specific job roles providing tools to list, search, add, update, and remove candidates from a reference list
  version: 1.0.0
host: [Connect via browser host name of your dev tunnel]
basePath: /
schemes:
  - https
paths:
  /:
    post:
      summary: HR MCP Server
      x-ms-agentic-protocol: mcp-streamable-1.0
      operationId: InvokeMCP
      responses:
        '200':
          description: Success
</code></pre>
<p><code>host</code> を dev tunnel のパブリック URL のホスト名に置き換えます。<code>https://</code> や末尾の <code>/</code> は含めず、例 <code>3dcwb74w-47002.euw.devtunnels.ms</code> の形式で指定してください。ファイルを保存し、ブラウザーに戻ります。 </p>
<p>コネクター名に <code>HR MCP Server</code> などを入力し、<strong>Import</strong> で先ほど作成した OpenAPI ファイルを選択、<strong>Continue</strong> をクリックします。</p>
<p><img alt="カスタムコネクター作成ダイアログ。コネクター名と OpenAPI 仕様ファイルのパスが入力済み。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-05.png" /></p>
<p>コネクター設定ページで <strong>Swagger editor</strong> を有効にし、OpenAPI 仕様のソースを確認します。</p>
<p><img alt="カスタムコネクター定義ページ。「Swagger editor」で YAML を確認。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-06.png" /></p>
<p><strong>Create connector</strong> を選択して作成が完了するのを待ちます。必要に応じてカスタムアイコンを設定し、<strong>Update connector</strong> で保存できます。<br />
Copilot Studio に戻り <strong>Refresh</strong> ボタンを選択してツール一覧を更新します。 </p>
<p><img alt="Copilot Studio でツール一覧更新のため「Refresh」ボタンを選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-07.png" /></p>
<p><strong>Model Context Protocol</strong> 一覧に <code>HR MCP Server</code> が表示されます。</p>
<p><img alt="「Model Context Protocol」ツール一覧に新しい「HR MCP Server」コネクターが表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-08.png" /></p>
<p><code>HR MCP Server</code> を選択し、Copilot Studio の標準 UI でサーバーへ接続後、<strong>Add and configure</strong> を選択します。</p>
<p><img alt="「HR MCP Server」コネクターをエージェントに追加するダイアログ。「Add and configure」を選択。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-09.png" /></p>
<p>MCP サーバーが公開しているすべてのツールがエージェントで利用可能になりました。詳細ウィンドウで確認できます。</p>
<p><img alt="登録した MCP サーバーの設定とツール一覧。" src="../../../../../assets/images/make/copilot-studio-06/mcp-integration-10.png" /></p>
<p><cc-end-step lab="mcs6" exercise="3" step="1" /></p>
<h3 id="2-mcp_1">手順 2: MCP サーバー統合のテスト</h3>
<p>右上の <strong>Publish</strong> を選択してエージェントを公開します。公開後、統合テストパネルで次のプロンプトを使用してテストします。</p>
<pre><code class="language-text">List all candidates
</code></pre>
<p>エージェントは MCP サーバーの <code>list_candidates</code> ツールを使用し、HR システム内の候補者一覧を返すはずです。ただし、候補者一覧を取得するにはコネクターへの接続が必要なため、Copilot Studio から <strong>Open connection manager</strong> が促されます。接続後 <strong>Retry</strong> を選択してください。</p>
<p><img alt="接続マネージャーを開き、MCP サーバーへ接続後にリトライするよう求めるダイアログ。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-01.png" /></p>
<p>接続が確立すると、HR MCP サーバーから実際の候補者一覧が返されます。</p>
<p><img alt="HR MCP サーバーから取得した候補者一覧。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-02.png" /></p>
<div class="admonition tip">
<p class="admonition-title">ローカルでの MCP サーバーのデバッグ</p>
<p>開発者の方は、<code>HRTools.cs</code> にブレークポイントを設定し、Visual Studio Code からデバッガーをアタッチして MCP サーバーをデバッグできます。</p>
</div>
<p>エージェントを Microsoft 365 Copilot Chat でも利用できるようにするには、1️⃣ <strong>Channels</strong> → 2️⃣ <strong>Teams and Microsoft 365 Copilot</strong> → 3️⃣ <strong>Make agent available in Microsoft 365 Copilot</strong> にチェック → 4️⃣ <strong>Add channel</strong> を選択します。チャンネルが有効になるのを待ち、サイドパネルを閉じて再度 <strong>Publish</strong> してください。</p>
<p><img alt="「Teams and Microsoft 365 Copilot」チャンネルでエージェントを公開する画面。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-01.png" /></p>
<p>再度 <strong>Teams and Microsoft 365 Copilot</strong> チャンネルを開き、<strong>See agent in Microsoft 365</strong> を選択してエージェントを Microsoft 365 Copilot に追加します。</p>
<p><img alt="「See agent in Microsoft 365」を選択してエージェントを追加。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-02.png" /></p>
<p>エージェント追加画面が表示されたら <strong>Add</strong> → <strong>Open</strong> を選択し、Microsoft 365 Copilot でエージェントを試します。</p>
<div class="admonition info">
<p class="admonition-title">エージェントの詳細</p>
<p><strong>Teams and Microsoft 365 Copilot</strong> チャンネル設定パネルでは、説明やカスタムアイコンなど追加情報も設定できます。</p>
</div>
<p><img alt="Microsoft 365 Copilot にエージェントを追加する画面。" src="../../../../../assets/images/make/copilot-studio-06/agent-publish-m365-chat-03.png" /></p>
<p>エージェントの UI に提案プロンプトが表示されます。たとえば次のプロンプトを試してください。</p>
<pre><code class="language-text">Search for candidate Alice
</code></pre>
<p><img alt="Microsoft 365 Copilot チャットで提案プロンプトが表示された HR Agent with MCP。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-01.png" /></p>
<p>エージェントは <code>search_candidates</code> ツールを使用し、検索条件に一致する候補者を 1 名だけ返すはずです。ただし、Microsoft 365 Copilot では再度 MCP サーバーへの接続が必要になるため、接続マネージャーを開くよう案内されます。</p>
<p><img alt="Microsoft 365 Copilot で接続マネージャーを開くよう指示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-02.png" /></p>
<p>接続後、再度プロンプトを実行すると期待どおりの結果が得られます。</p>
<p><img alt="検索条件に一致した候補者 Alice Johnson の情報を表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-03.png" /></p>
<p>次は <code>add_candidate</code> ツールのような高度なツールを試してみましょう。以下のプロンプトを使用します。</p>
<pre><code class="language-text">Add a new candidate: John Smith, Software Engineer, skills: React, Node.js, 
email: john.smith@email.com, speaks English and Spanish
</code></pre>
<p>エージェントは意図を理解し、<code>add_candidate</code> ツール用の入力パラメーターを抽出して新しい候補者を追加します。MCP サーバーからは簡単な確認応答が返されます。</p>
<p><img alt="新しい候補者が HR システムに追加されたことを確認するエージェント。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-04.png" /></p>
<p>候補者一覧を再度取得して結果を確認すると、末尾に <code>John Smith</code> が追加されています。</p>
<p><img alt="更新後の候補者一覧。John Smith がリストの末尾に表示。" src="../../../../../assets/images/make/copilot-studio-06/mcp-test-copilot-05.png" /></p>
<p>以下のようなプロンプトでも試してみてください。</p>
<pre><code class="language-text">Update the candidate with email bob.brown@example.com to speak also French
</code></pre>
<p>または:</p>
<pre><code class="language-text">Add skill &quot;Project Management&quot; to candidate bob.brown@example.com
</code></pre>
<p>または:</p>
<pre><code class="language-text">Remove candidate bob.brown@example.com
</code></pre>
<p>エージェントは適切なツールを呼び出し、プロンプトに応じて動作します。</p>
<p>素晴らしい! エージェントは完全に機能し、HR MCP サーバーが公開するすべてのツールを利用できます。</p>
<p><cc-end-step lab="mcs6" exercise="3" step="2" /></p>
<p><span style="font-size: large; font-weight: bold; color: #1c8fd2;">おめでとうございます！</span></p>
<p>ラボ MCS6 - MCP サーバーの利用 を完了しました!</p>
<!-- <a href="../07-autonomous">Start here</a> with Lab MCS7, to learn how to create autonomous agents in Copilot Studio.
<cc-next />  -->

<p><img src="https://m365-visitor-stats.azurewebsites.net/copilot-camp/make/copilot-studio/06-mcp--ja" /></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.integrate", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../../../javascripts/cc-award.js"></script>
      
        <script src="../../../../../javascripts/cc-next.js"></script>
      
        <script src="../../../../../javascripts/cc-lab-step.js"></script>
      
        <script src="../../../../../javascripts/cc-card.js"></script>
      
    
  </body>
</html>